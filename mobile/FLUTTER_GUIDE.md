# ğŸ“± WanderFlow ç§»åŠ¨ç«¯å¼€å‘å®Œæ•´æŒ‡å—

## æ¦‚è¿°

æœ¬æ–‡æ¡£ä¸º WanderFlow AI æ—…è¡ŒåŠ©æ‰‹ç§»åŠ¨ç«¯å¼€å‘çš„å®Œæ•´æŒ‡å—ï¼ŒåŒ…æ‹¬æŠ€æœ¯é€‰å‹ã€æ¶æ„è®¾è®¡ã€å¼€å‘æµç¨‹ç­‰ã€‚

---

## ä¸€ã€æŠ€æœ¯é€‰å‹å¯¹æ¯”

### 1.1 è·¨å¹³å°æ–¹æ¡ˆå¯¹æ¯”

| æ–¹æ¡ˆ | å­¦ä¹ æ›²çº¿ | æ€§èƒ½ | å¼€å‘æ•ˆç‡ | ç”Ÿæ€ | æ¨èåº¦ |
|------|----------|------|----------|------|--------|
| Flutter | ä¸­ç­‰ | â­â­â­â­â­ | â­â­â­â­â­ | â­â­â­â­â­ | â­â­â­â­â­ |
| React Native | ä½ | â­â­â­â­ | â­â­â­â­ | â­â­â­â­â­ | â­â­â­â­ |
| Ionic | ä½ | â­â­â­ | â­â­â­â­â­ | â­â­â­ | â­â­â­ |
| åŸç”Ÿå¼€å‘ | é«˜ | â­â­â­â­â­ | â­â­ | â­â­â­â­ | â­â­ |

### 1.2 ä¸ºä»€ä¹ˆé€‰æ‹© Flutterï¼Ÿ

| ä¼˜åŠ¿ | è¯´æ˜ |
|------|------|
| **ä¸€å¥—ä»£ç ** | åŒæ—¶æ”¯æŒ iOS å’Œ Androidï¼ŒèŠ‚çœ 50% å¼€å‘æ—¶é—´ |
| **æ€§èƒ½ä¼˜ç§€** | ç¼–è¯‘ä¸ºåŸç”Ÿä»£ç ï¼Œæ¥è¿‘åŸç”Ÿæ€§èƒ½ |
| **å¼€å‘æ•ˆç‡** | çƒ­é‡è½½ï¼Œå¿«é€Ÿè¿­ä»£ |
| **UI æ¼‚äº®** | è‡ªå¸¦ Material Designï¼ŒUI ä¸€è‡´æ€§é«˜ |
| **Google æ”¯æŒ** | å®˜æ–¹ç»´æŠ¤ï¼Œé•¿æœŸæœ‰ä¿éšœ |

---

## äºŒã€é¡¹ç›®æ¶æ„

### 2.1 æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Flutter App                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  UI Layer (Screens + Components)    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  State Management (Riverpod)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Services (Auth, API, Storage)      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Network Layer (Dio)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Backend API (FastAPI)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 ç›®å½•ç»“æ„è¯¦è§£

```
lib/
â”œâ”€â”€ main.dart                     # åº”ç”¨å…¥å£
â”‚
â”œâ”€â”€ api/                          # API æ¥å£å±‚
â”‚   â”œâ”€â”€ api_client.dart           # Dio HTTP å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ endpoints.dart            # æ‰€æœ‰æ¥å£è·¯å¾„å®šä¹‰
â”‚   â”œâ”€â”€ auth_api.dart             # è®¤è¯ API å®ç°
â”‚   â”œâ”€â”€ planner_api.dart          # è¡Œç¨‹è§„åˆ’ API
â”‚   â”œâ”€â”€ copywriter_api.dart       # æ–‡æ¡ˆç”Ÿæˆ API
â”‚   â””â”€â”€ qa_api.dart               # AI å¯¹è¯ API
â”‚
â”œâ”€â”€ models/                       # æ•°æ®æ¨¡å‹ï¼ˆä¸åç«¯å¯¹åº”ï¼‰
â”‚   â”œâ”€â”€ user.dart                 # User
â”‚   â”œâ”€â”€ user_quota.dart           # UserQuota
â”‚   â”œâ”€â”€ itinerary.dart            # Itinerary, DayPlan, Activity
â”‚   â”œâ”€â”€ copywriting_result.dart   # CopywritingResult
â”‚   â””â”€â”€ chat_message.dart         # ChatMessage
â”‚
â”œâ”€â”€ screens/                      # é¡µé¢
â”‚   â”œâ”€â”€ auth/                     # è®¤è¯ç›¸å…³
â”‚   â”‚   â”œâ”€â”€ login_screen.dart     # ç™»å½•é¡µ
â”‚   â”‚   â””â”€â”€ register_screen.dart  # æ³¨å†Œé¡µ
â”‚   â”œâ”€â”€ home/                     # é¦–é¡µï¼ˆå¾…å®ç°ï¼‰
â”‚   â”œâ”€â”€ planner/                  # è¡Œç¨‹è§„åˆ’ï¼ˆå¾…å®ç°ï¼‰
â”‚   â”œâ”€â”€ copywriter/               # æ–‡æ¡ˆç”Ÿæˆï¼ˆå¾…å®ç°ï¼‰
â”‚   â”œâ”€â”€ chat/                     # AI å¯¹è¯ï¼ˆå¾…å®ç°ï¼‰
â”‚   â”œâ”€â”€ profile/                  # ä¸ªäººä¸­å¿ƒï¼ˆå¾…å®ç°ï¼‰
â”‚   â””â”€â”€ settings/                 # è®¾ç½®ï¼ˆå¾…å®ç°ï¼‰
â”‚
â”œâ”€â”€ components/                   # å¯å¤ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ common/                   # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ app_button.dart       # æŒ‰é’®
â”‚   â”‚   â”œâ”€â”€ app_input.dart        # è¾“å…¥æ¡†
â”‚   â”‚   â””â”€â”€ app_card.dart         # å¡ç‰‡
â”‚   â”œâ”€â”€ auth/                     # è®¤è¯ç»„ä»¶
â”‚   â”œâ”€â”€ planner/                  # è¡Œç¨‹ç»„ä»¶
â”‚   â””â”€â”€ copywriter/               # æ–‡æ¡ˆç»„ä»¶
â”‚
â”œâ”€â”€ services/                     # ä¸šåŠ¡æœåŠ¡
â”‚   â””â”€â”€ auth_service.dart         # è®¤è¯æœåŠ¡ï¼ˆçŠ¶æ€ç®¡ç†ï¼‰
â”‚
â”œâ”€â”€ theme/                        # ä¸»é¢˜é…ç½®
â”‚   â”œâ”€â”€ app_theme.dart            # äº®è‰²/æš—è‰²ä¸»é¢˜
â”‚   â””â”€â”€ dimensions.dart           # å°ºå¯¸ã€é—´è·
â”‚
â”œâ”€â”€ utils/                        # å·¥å…·ç±»
â”‚   â”œâ”€â”€ constant.dart             # å¸¸é‡é…ç½®
â”‚   â”œâ”€â”€ validators.dart           # è¡¨å•éªŒè¯
â”‚   â””â”€â”€ toast.dart                # æç¤ºæ¶ˆæ¯
â”‚
â””â”€â”€ routes/                       # è·¯ç”±é…ç½®
    â””â”€â”€ app_router.dart           # GoRouter é…ç½®
```

---

## ä¸‰ã€æ ¸å¿ƒåŠŸèƒ½å®ç°æŒ‡å—

### 3.1 è®¤è¯æµç¨‹

```mermaid
sequenceDiagram
    ç”¨æˆ·->>ç™»å½•é¡µ: è¾“å…¥é‚®ç®±å¯†ç 
    ç™»å½•é¡µ->>AuthService: login()
    AuthService->>AuthApi: POST /auth/login
    AuthApi->>åç«¯: å‘é€ç™»å½•è¯·æ±‚
    åç«¯-->>AuthApi: è¿”å› access_token
    AuthApi-->>AuthService: ä¿å­˜ Token
    AuthService->>SecureStorage: å­˜å‚¨ Token
    AuthService-->>ç™»å½•é¡µ: ç™»å½•æˆåŠŸ
    ç™»å½•é¡µ->>é¦–é¡µ: è·³è½¬
```

**ä»£ç å®ç°**ï¼š`lib/services/auth_service.dart`

### 3.2 API è°ƒç”¨ç¤ºä¾‹

```dart
// 1. åˆå§‹åŒ– API å®¢æˆ·ç«¯
final ApiClient client = ApiClient();
client.init();

// 2. è°ƒç”¨æ¥å£
final PlannerApi plannerApi = PlannerApi();
final itineraries = await plannerApi.getItineraries();

// 3. å¤„ç†å“åº”
for (var item in itineraries) {
  final itinerary = Itinerary.fromJson(item);
  print(itinerary.title);
}
```

### 3.3 çŠ¶æ€ç®¡ç†

```dart
// ä½¿ç”¨ Riverpod ç®¡ç†çŠ¶æ€
final itineraryProvider = FutureProvider.autoDispose((ref) async {
  final api = PlannerApi();
  final response = await api.getItineraries();
  return response;
});

// åœ¨ Widget ä¸­ä½¿ç”¨
class MyWidget extends ConsumerWidget {
  @override
  Widget build(BuildContext context, WidgetRef ref) {
    final itineraries = ref.watch(itineraryProvider);
    return itineraries.when(
      data: (data) => ListView.builder(...),
      loading: () => CircularProgressIndicator(),
      error: (e, s) => Text('é”™è¯¯: $e'),
    );
  }
}
```

---

## å››ã€å¼€å‘æ—¶é—´çº¿

### é˜¶æ®µä¸€ï¼šåŸºç¡€æ¡†æ¶ï¼ˆç¬¬ 1 å‘¨ï¼‰

- [x] é¡¹ç›®æ­å»º
- [x] API å®¢æˆ·ç«¯
- [x] æ•°æ®æ¨¡å‹
- [x] è®¤è¯é¡µé¢
- [ ] é¦–é¡µæ¡†æ¶

### é˜¶æ®µäºŒï¼šæ ¸å¿ƒåŠŸèƒ½ï¼ˆç¬¬ 2-3 å‘¨ï¼‰

- [ ] è¡Œç¨‹è§„åˆ’åŠŸèƒ½
  - [ ] è¡Œç¨‹åˆ—è¡¨
  - [ ] è¡Œç¨‹è¯¦æƒ…
  - [ ] ç”Ÿæˆè¡Œç¨‹è¡¨å•
- [ ] æ–‡æ¡ˆç”ŸæˆåŠŸèƒ½
  - [ ] å¹³å°é€‰æ‹©
  - [ ] å›¾ç‰‡ä¸Šä¼ 
  - [ ] ç»“æœå±•ç¤º

### é˜¶æ®µä¸‰ï¼šæ‰©å±•åŠŸèƒ½ï¼ˆç¬¬ 4 å‘¨ï¼‰

- [ ] AI å¯¹è¯
- [ ] ä¸ªäººä¸­å¿ƒ
- [ ] è®¾ç½®é¡µé¢

### é˜¶æ®µå››ï¼šä¼˜åŒ–æµ‹è¯•ï¼ˆç¬¬ 5 å‘¨ï¼‰

- [ ] UI ä¼˜åŒ–
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] å¤šè®¾å¤‡æµ‹è¯•
- [ ] Bug ä¿®å¤

---

## äº”ã€å‘å¸ƒä¸Šæ¶

### 5.1 Android

```bash
# 1. ç”Ÿæˆç­¾åå¯†é’¥
keytool -genkey -v -keystore ~/key.jks -keyalg RSA -keysize 2048 -validity 10000 -alias key

# 2. é…ç½® android/key.properties
flutter pub run
flutter build apk --release
```

### 5.2 iOS

```bash
# 1. æ‰“å¼€ Xcode
open ios/Runner.xcworkspace

# 2. é…ç½®ç­¾åå’Œè¯ä¹¦

# 3. æ„å»º
flutter build ios --release
```

---

## å…­ã€æˆæœ¬ä¼°ç®—

### è‡ªä¸»å¼€å‘

| é¡¹ç›® | æˆæœ¬ |
|------|------|
| å¼€å‘è€…è´¦å·ï¼ˆAppleï¼‰ | Â¥688/å¹´ |
| å¼€å‘è€…è´¦å·ï¼ˆGoogleï¼‰ | $25 ä¸€æ¬¡æ€§ |
| æ—¶é—´æˆæœ¬ | 4-5 å‘¨ |

### å¤–åŒ…å¼€å‘

| é¡¹ç›® | è´¹ç”¨ |
|------|------|
| åŸºç¡€åŠŸèƒ½ï¼ˆç™»å½•ã€é¦–é¡µï¼‰ | Â¥8,000-12,000 |
| æ ¸å¿ƒåŠŸèƒ½ï¼ˆè¡Œç¨‹ã€æ–‡æ¡ˆï¼‰ | Â¥12,000-20,000 |
| æ‰©å±•åŠŸèƒ½ï¼ˆå¯¹è¯ã€ä¸ªäººä¸­å¿ƒï¼‰ | Â¥5,000-10,000 |
| æµ‹è¯•ä¼˜åŒ– | Â¥3,000-5,000 |
| **æ€»è®¡** | **Â¥28,000-47,000** |

---

## ä¸ƒã€ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### ç«‹å³å¼€å§‹

1. **å®‰è£… Flutter SDK**
   ```bash
   # macOS
   brew install flutter

   # Windows
   # ä»å®˜ç½‘ä¸‹è½½å®‰è£…åŒ…
   # https://docs.flutter.dev/get-started/install/windows
   ```

2. **é…ç½®å¼€å‘ç¯å¢ƒ**
   ```bash
   flutter doctor
   flutter doctor --android-licenses
   ```

3. **è¿è¡Œé¡¹ç›®**
   ```bash
   cd mobile/flutter
   flutter pub get
   flutter run
   ```

### å­¦ä¹ èµ„æº

- Flutter å®˜æ–¹æ–‡æ¡£ï¼šhttps://docs.flutter.dev/
- Flutter ä¸­æ–‡ç½‘ï¼šhttps://flutter.cn/
- Dart è¯­è¨€æŒ‡å—ï¼šhttps://dart.dev/guides
- Flutter å®æˆ˜è¯¾ç¨‹ï¼šhttps://www.bilibili.com/video/BV1uJ411d7yk

---

**å¼€å§‹å¼€å‘å§ï¼** ğŸš€
